# Nishida-Lab Raspberry Pi について
文責：[田中良道](https://github.com/RyodoTanaka)
日時：2016/04/14

## はじめに
西田研究室に入ったら、GitとGitHubをまず教えられるはず...なので、このREADMEを読んでいるあなたは、ブラウザ上でGitHubを開き、このREADMEを読んでくれていることと思います！  
このREADMEは、これまでにRCRで西田研が使用してきたRaspberryPiのツールやノウハウについて書いてあります。なので、自分もRCRが終わったら or やりながら、詰まったポイントやその解決策をココに記してもらえると嬉しいです。

## 使用言語について
基本的にC++を使用しています。多分、ものつくり系サークルに属していない方でも、C言語だけなら知ってると思います。C++は、C言語で書いても動くので、あまりビビらず頑張ってください！見たこと無い表現とかあれば、先輩に聞けば、教科書の一つや二つ、貸してくれるでしょう。がんばれ！  
C++以外にも、RaspberryPiではPythonを使って書く方も多いみたいです。そのへんはわかる方はどんどん開発してください！そして、記録を残していってくださいm(_ _)m

## ライブラリについて
GPIOの制御（ピンのON・OFFをやること）や、PWM制御、  
RaspberryCameraから情報を取得してOpenCVで用いる  
などのために、ライブラリを使っています。
2016/04/14現在で使用しているライブラリは

- [WiringPi](http://wiringpi.com/) C++  
  GPIO制御用のライブラリ。ひと通りのことはできるが、複数のPWM（2つまではできた）など、発展系は苦手。というか、RaspberryPi B+ 自体が苦手。複数のサーボモータを動かしてやろうとか考える場合には、他のマイコン(Arduinoとか)を使うか、専用ボード（I2C通信機能とかついてる専用ボード）を購入するのがおすすめ。
- [PiBits](https://github.com/richardghirst/PiBits) C++  
  Servoモータ用のPWM信号を簡単に作れるようにしてくれるライブラリ。（だったと思う...orz）
- [raspicam_cv](https://github.com/robidouille/robidouille/tree/master/raspicam_cv) C++  
  RaspberryCameraを読み込み、OpenCVの型に変換してくれる超絶便利ライブラリ。基本的に、リンク先のREADME通りにやればOK。うまく行かなかったら、リンク先のREADMEに書いてあるTrouble Shootingを読んで、似てる症状を探し、解決策を考えること。それでも分からなかったら、エラーコードでググれ！

## ビルド方法について
ビルドにはCMakeを使っています。なので、これに則ってやろう！という方は、CMakeLists.txtの書き方の勉強から始めると良いかもしれません。
### 分散コンパイルについて
本リポジトリにあるプログラムは、分散コンパイルという手法をとっています。ググればどういうことかわかると思いますが、要は、プログラムをセクションごとにコンパイルして、最後に実行ファイルを作るというやり方です。この方法でプログラムを書くと、可読性が向上します！一方で、実行速度が遅くなることも有ります...どうするかはアナタ次第ですが、分散コンパイルを行うことをおすすめします。

## 使い方
1. 本リポジトリをcloneしましょう。Gitの使い方は割愛します。
   ```bash
   $ cd ~
   $ git clone http://github.com/Nishida-Lab/RCR2015.git
   ```

2. ライブラリをビルドしましょう
   ```bash
   $ cd <RCR2015>/Raspberry-Pi/OpenCV/userland
   $ ./buildme
   $ cd <RCR2015>/Raspberry-Pi/OpenCV/robidouille/raspicam_cv
   $ mkdir objs
   $ make
   ```

3. プログラムをビルドしましょう。
   ```bash
   $ cd <RCR2015>/SRC/
   $ mkdir build
   $ cd build
   $ cmake ..
   $ make
   ```   
   すると、main.cppが置いてあるディレクトリにmainという実行ファイルが完成します。

## 最後に
各ライブラリの使い方は、上記の**ライブラリについて**に書いてあるリンクに飛べば大体わかると思います。もし分からなければ、先輩に聞いてみてください。  
リモートデスクトップ・SSH・EmacsのTrampパッケージ などは、RaspberryPiの開発を行う上で、非常に便利です。使い方や、インストール方法を先輩に聞いてどんどん使いましょう！ では、優勝目指して頑張れ！！




